// prisma cheat sheet: https://github.com/emanuelefavero/prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// maybe move into models/user, express-like, and import into here?
model User {
  id            Int      @id @default(autoincrement())
  clerk_id      String   @unique
  hasPlan       Boolean  @default(false)
  plan          String?  @default("hobby")
  hasFirstModel Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

enum ModelStatus {
  PENDING
  TRAINING
  COMPLETED
  FAILED
}

// todo explore best way to "link" model to user
model MLModel {
  id                Int         @id @default(autoincrement())
  user_id           String      @unique // clerk user_id
  name              String?
  stylePrompt       String?
  imageUrls         String[]
  trainId           String?
  baseModel         String?
  destination       String?
  modelStatus       ModelStatus @default(PENDING)
  tword             String?
  modelHostId       String?
  completedTraining Boolean     @default(false)
  agreedToTerms     Boolean     @default(false)
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt
}

// import * from "./../src/models/user.prisma" (alternate approach to use /models)
